<!DOCTYPE>
<html>
    <head>
        <link rel="stylesheet" style="text/css" href="style.css"/>
        <title> Faeyndom </title>
    </head>
    <body>
        <header-component></header-component>
        <main>
            <sidebar-component></sidebar-component>
            <div class="content">
                <div id="board" class="board">
                    <div id="target" class="target" style="position: absolute">
                    </div>
                </div>
                <p>
                Click: <span id="count">0</span> times <br>
                Miss: <span id="misscount">0</span> times <br>
                Stat: <span id="velocity">0</span> / m </p>
            </div>
        </main>
        <script src="header.js"></script>
        <script src="sidebar.js"></script>
        <script>
            
            function sleep(ms) {
              return new Promise(resolve => setTimeout(resolve, ms));
            };
            
            function randomIntBetween(max, min) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            };

            const el = document.getElementById("target");
            const {width: elWidth, height: elHeight} = el.getBoundingClientRect();
            
            function setPosition() {
                const board = document.getElementById("board");
                const {width: boardWidth, height: boardHeight} = board.getBoundingClientRect();

                let x = randomIntBetween(boardWidth - elWidth, 0)
                let y = randomIntBetween(boardHeight - elHeight, 0)
                el.style.transform = `translate(${x}px, ${y}px)`;
            }

            setPosition(); 

            window.addEventListener("resize", () => {
                const { widht: boardWidth, height: boardHeight} = board.getBoundingClientRect();
                setPosition();
              });
            
            const start = Date.now();
            let count = 0;
            let missCount = 0;
            let velocity = 0;

            const counter = document.getElementById("count");
            const statVelocity = document.getElementById("velocity");
            
            el.addEventListener("click", () => {
                count++;
                missCount--;
                velocity = Math.floor(count / (Date.now() - start) * 1000 * 60);
                console.log(velocity);

                statVelocity.textContent = velocity;
                counter.textContent = count;
                setPosition();
            });
            
            const missCounter = document.getElementById("misscount");
            board.addEventListener("click", () => {
                missCount++;
                missCounter.textContent = missCount;
                setPosition();
            });


        </script>

    </body>
</html>

